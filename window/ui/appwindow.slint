import { Button, VerticalBox, HorizontalBox, CheckBox, Slider, StandardListView, ComboBox } from "std-widgets.slint";

export component AppWindow inherits Window {
    in-out property <int> counter: 42;
    callback request-increase-value(bool);
    callback request-decrise-value(bool);
    callback request-set-value-100(bool);
    callback update_counter(int, bool);
    callback change_colour(int);
    in-out property <bool> use_slider: false;
    in-out property <int> value: 10;
    in-out property <brush> colour: blue;
    VerticalBox {
        HorizontalBox {
            Path {
                width: 100px;
                height: 100px;
                stroke: colour;
                stroke-width: 1px;
            
                MoveTo {
                    x: 0;
                    y: 0;
                }
                LineTo {
                    x: 0;
                    y: 100;
                }
                ArcTo {
                    radius-x: 1;
                    radius-y: 1;
                    x: 100;
                    y: 100;
                }
                LineTo {
                    x: 100;
                    y: 0;
                }
                Close {
                }
            }

            Text {
                text: "Counter: \{root.counter}";
                font-size: 50px;
                font-family: "Open Sans";
                color: colour;
            }
        }
        Button {
            text: "Increase value";
            clicked => {
                root.request-increase-value(use_slider);
            }
        }

        Button {
            text: "Decrise value";
            clicked => {
                root.request-decrise-value(use_slider);
            }
        }

        Button {
            text: "Set value to 100";
            clicked => {
                root.request-set-value-100(use_slider);
            }
        }

        Image {
            source: @image-url("D:\\programowanie\\rust\\window\\pepe.jpg");
            height: 200px;
            // image-fit default is `contain` when in layout, preserving aspect ratio
        }

        TextInput {
            text: "Replace me with a name";
            selection-background-color: green;
            single-line: true;
        }

        CheckBox {
            text: "use slider";
            checked: root.use_slider; 
            toggled => {
                if root.use_slider == true {
                    root.use_slider = false;
                }
                else {
                    root.use_slider = true;
                }
                root.counter = root.value;
            }
        }

        Slider {
            width: 200px;
            value: 42;
            changed (value) => {
                root.update_counter(value, root.use_slider);
                root.value = value;
            }
        }

        HorizontalBox {
            StandardListView {
                width: 150px;
                height: 150px;
                model: [ { text: "Blue"}, { text: "Red" }, { text: "Green" },
                    { text: "Yellow" }, { text: "Black"}, { text: "White"},
                    { text: "Magenta" }, { text: "Cyan" },
                ];
                current-item: 0;
            }

            ComboBox {
                width: 300px;
                model: ["first", "second", "third"];
                current-value: "first";
            }
        }
    }
}
